<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <title>Peticiones de red (url)</title>
</head>

<body>
    <style>
        a {
            text-decoration: none;
            text-align: center;
            color: #1eaedb;
        }

        img {
            width: 25%;
        }
    </style>
    <link rel="stylesheet" href="css/style.css">
    <div class="container" style="text-align: center;margin: 0 auto; margin-top: 68px;">
        <h2>Peticiones de red (url) conectado al servidor: Promesas
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-lg btn-outline-info" data-bs-toggle="modal"
                data-bs-target="#exampleModal">
                <code>fetch()</code>
            </button>
        </h2>
        <div class="container">
            <div>
                <a href="#" id="api" class="btn btn-dark"><code>Cargar App ⨠</code></a>
            </div>
            <div id="resultado"></div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        <div class="card">
                            <p>
                                fetch() es una función que se utiliza para hacer solicitudes HTTP asíncronas a un
                                servidor web.
                                La sintaxis básica es la siguiente:

                                let promise = fetch(url, [options])</p>
                            <ul> Donde:
                                <li>url representa la dirección URL a la que deseamos acceder.</li>
                                <li>options representa los parámetros opcionales, como puede ser un método o los
                                    encabezados de
                                    nuestra
                                    petición.</li>
                            </ul>
                            Por ejemplo:
                            <div class="card-body">
                                fetch('https://api.example.com/data')
                                .then(response => response.json())
                                .then(data => console.log(data))
                                .catch(error => console.error(error))
                            </div>
                            <div class="card-footer">
                                En este ejemplo, se hace una solicitud GET a la URL especificada y se espera una
                                respuesta en
                                formato JSON.
                                Si
                                la solicitud es exitosa, se muestra el resultado en la consola del navegador. Si ocurre
                                algún error,
                                se
                                muestra
                                un mensaje de error en la consola.

                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('api').addEventListener('click', cargarApi);
        function cargarApi() {
            fetch('https://picsum.photos/v2/list').then(traer => traer.json()).then(imagenes => {
                console.log(imagenes)
                let html = ``;
                imagenes.forEach(imagen => {
                    html += `<ul class="list-group">
                            <li class="list-group-item"
                             <h5>Autor: ${imagen.author}</h5><br>
                             <img src="${imagen.download_url}"/><br>
                             <a class="btn btn-outline-primary" href="${imagen.url}">Descarga</a><br>
                            </li>
                            </ul>`;
                });
                document.getElementById('resultado').innerHTML = html;
            })
        }
    </script>
</body>

</html>